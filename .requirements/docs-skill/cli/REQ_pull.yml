gherkin: |-
  Given a configured .docs folder
  When the user runs docs pull
  Then only docs matching their topic patterns are synced
source:
  type: manual
  description: Initial design
tests:
  - file: plugins/docs-skill/src/__tests__/store.test.ts
    identifier: writes doc file with frontmatter
    hash: 0da9d43b5b26f3cc2a63fa0aae1a739d4728489ae850df5f14f269ddabb17ce6
  - file: plugins/docs-skill/src/__tests__/store.test.ts
    identifier: loads docs from .docs directory
    hash: 3b8781bd8c1c285cb272584e05ff2d64324c75c567ad63cd94a2237112760ff1
  - file: plugins/docs-skill/src/__tests__/topic-matcher.test.ts
    identifier: respects exclusion patterns
    hash: b34211a411537ce7896d189ef3f0a56388a4e911fef2c60b81df2a4ed1aaf01f
  - file: plugins/docs-skill/src/__tests__/store.test.ts
    identifier: creates nested directories
    hash: bd221f61620f0475e5f013e0343f1307311cfaf08ebc8cfd1d937de7edc9454e
  - file: plugins/docs-skill/src/__tests__/store.test.ts
    identifier: returns empty array when no docs exist
    hash: 986ffd754fbfd103ce5d96fadd76b1105c7ea4c3a9ff406971ac815504badc66
  - file: plugins/docs-skill/src/__tests__/store.test.ts
    identifier: loads multiple docs from nested directories
    hash: 9608d4b25c499091ac4bffcbe147179305339c90a09d033812fdc070cf1721fc
  - file: plugins/docs-skill/src/__tests__/store.test.ts
    identifier: skips invalid markdown files
    hash: c88915792c965b03a3666e91a6f2c74997ed03f0af0807c80cd158a92458588f
  - file: plugins/docs-skill/src/__tests__/pull.test.ts
    identifier: only syncs docs matching configured topic patterns
    hash: ddd1b2b344a677610076a12d22a245933e2d0bb95f67ab38c018ca5ce74859ed
status: done
scenarios:
  - name: pull_excludes_non_matching_topics
    gherkin: |-
      Given a configured .docs folder with topics [nextjs/**]
      When the user runs docs pull
      And remote docs include nextjs/routing
      And react/hooks
      Then only nextjs/routing is synced to .docs
  - name: pull_respects_exclusion_patterns
    gherkin: |-
      Given a configured .docs folder with topics [nextjs/**, !nextjs/legacy/*]
      When the user runs docs pull
      And remote docs include nextjs/routing
      And nextjs/legacy/old
      Then only nextjs/routing is synced to .docs
aiAssessment:
  sufficient: true
  notes: "The new integration test verifies the core pull command flow:
    configuring topic patterns, filtering docs with getIncludedTopics, and
    writing only matching docs to .docs folder. Combined with existing unit
    tests for topic-matcher and store, this provides good coverage of the
    requirement."
  assessedAt: 2025-12-18T01:58:08.747Z
  criteria:
    noBugsInTestCode:
      result: pass
      note: Tests are well-structured with proper setup/teardown, proper assertions,
        no logical bugs
    sufficientCoverage:
      result: pass
      note: New integration test covers the full pull flow with topic pattern
        filtering, complementing existing unit tests
    meaningfulAssertions:
      result: pass
      note: Assertions verify both inclusion (matching topics synced) and exclusion
        (non-matching topics not synced) with exact counts
    correctTestSubject:
      result: pass
      note: Integration test directly tests the pull command flow including config
        reading, topic filtering, and doc writing
    happyPathCovered:
      result: pass
      note: "Happy path covered: configured .docs folder + topic patterns + docs pull
        = only matching docs synced"
    edgeCasesAddressed:
      result: pass
      note: Tests cover multiple sources, nested paths, and exclusion patterns
    errorScenariosHandled:
      result: pass
      note: Error scenarios like invalid files and missing configs are covered by
        existing store tests
    wouldFailIfBroke:
      result: pass
      note: If topic filtering logic broke, tests would fail since they verify exact
        doc counts and topic presence/absence
  testComments:
    - file: plugins/docs-skill/src/__tests__/pull.test.ts
      identifier: only syncs docs matching configured topic patterns
      comment: "Integration test that verifies the complete pull flow: creates .docs
        config with topic patterns, simulates available docs from multiple
        sources, runs pull logic, and verifies only matching docs are written"
      hasIssue: false
  suggestedTests: []
  suggestedScenarios: []
